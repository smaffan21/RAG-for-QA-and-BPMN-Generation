<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             targetNamespace="http://www.omg.org/bpmn20">
  <process id="OnlineOrderFulfillment" name="OnlineOrderFulfillment">
    <startEvent id="evt_new_order" name="New Order Received"/>
    <task id="task_verify_payment" name="Verify Payment Method"/>
    <exclusiveGateway id="gw_payment_valid" name="Payment Valid?"/>
    <task id="task_check_min_total" name="Check Order Total"/>
    <exclusiveGateway id="gw_min_total" name="Order Total >= $10?"/>
    <task id="task_check_stock" name="Check Item Stock"/>
    <exclusiveGateway id="gw_stock_available" name="All Items in Stock?"/>
    <task id="task_check_fraud" name="Manual Fraud Check"/>
    <exclusiveGateway id="gw_fraud_check" name="Fraud Check Passed?"/>
    <task id="task_verify_shipping" name="Verify Shipping Address"/>
    <exclusiveGateway id="gw_shipping_valid" name="Shipping Address Valid?"/>
    <task id="task_check_premium" name="Check Premium Status"/>
    <exclusiveGateway id="gw_premium_status" name="Premium Member?"/>
    <task id="task_prep_standard" name="Prepare Standard Shipment"/>
    <task id="task_prep_expedited" name="Prepare Expedited Shipment"/>
    <endEvent id="evt_order_processed" name="Order Processed"/>
    <endEvent id="evt_order_rejected" name="Order Rejected"/>
    <sequenceFlow id="flow_start_to_verify" sourceRef="evt_new_order" targetRef="task_verify_payment"/>
    <sequenceFlow id="flow_verify_to_gw" sourceRef="task_verify_payment" targetRef="gw_payment_valid"/>
    <sequenceFlow id="flow_payment_ok" sourceRef="gw_payment_valid" targetRef="task_check_min_total" name="Payment Valid"/>
    <sequenceFlow id="flow_payment_nok" sourceRef="gw_payment_valid" targetRef="evt_order_rejected" name="Payment Invalid"/>
    <sequenceFlow id="flow_min_total_ok" sourceRef="gw_min_total" targetRef="task_check_stock" name="Total >= $10"/>
    <sequenceFlow id="flow_min_total_nok" sourceRef="gw_min_total" targetRef="evt_order_rejected" name="Total < $10"/>
    <sequenceFlow id="flow_stock_ok" sourceRef="gw_stock_available" targetRef="task_check_fraud" name="Stock Available"/>
    <sequenceFlow id="flow_stock_nok" sourceRef="gw_stock_available" targetRef="evt_order_rejected" name="Stock Unavailable"/>
    <sequenceFlow id="flow_fraud_ok" sourceRef="gw_fraud_check" targetRef="task_verify_shipping" name="Fraud Check Passed"/>
    <sequenceFlow id="flow_fraud_nok" sourceRef="gw_fraud_check" targetRef="evt_order_rejected" name="Fraud Check Failed"/>
    <sequenceFlow id="flow_shipping_ok" sourceRef="gw_shipping_valid" targetRef="task_check_premium" name="Shipping Valid"/>
    <sequenceFlow id="flow_shipping_nok" sourceRef="gw_shipping_valid" targetRef="evt_order_rejected" name="Shipping Invalid"/>
    <sequenceFlow id="flow_premium_yes" sourceRef="gw_premium_status" targetRef="task_prep_expedited" name="Premium Member"/>
    <sequenceFlow id="flow_premium_no" sourceRef="gw_premium_status" targetRef="task_prep_standard" name="Standard Member"/>
    <sequenceFlow id="flow_standard_to_end" sourceRef="task_prep_standard" targetRef="evt_order_processed"/>
    <sequenceFlow id="flow_expedited_to_end" sourceRef="task_prep_expedited" targetRef="evt_order_processed"/>
  </process>
</definitions>